# çŒ«å’ªæ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œç‰©ä½“æ£€æµ‹ä½œä¸ºå…¶ä¸­ä¸€ä¸ªé‡è¦çš„ç ”ç©¶é¢†åŸŸï¼Œå·²ç»åœ¨å¤šä¸ªåº”ç”¨åœºæ™¯ä¸­å±•ç°å‡ºå…¶å·¨å¤§çš„æ½œåŠ›å’Œä»·å€¼ã€‚ç‰¹åˆ«æ˜¯åœ¨å® ç‰©ç›‘æµ‹ã€åŠ¨ç‰©ä¿æŠ¤ä»¥åŠæ™ºèƒ½å®¶å±…ç­‰é¢†åŸŸï¼ŒçŒ«å’ªä½œä¸ºä¸€ç§å¹¿å—æ¬¢è¿çš„å® ç‰©ï¼Œå…¶æ£€æµ‹ä¸è¯†åˆ«çš„éœ€æ±‚æ—¥ç›Šå¢åŠ ã€‚ä¼ ç»Ÿçš„çŒ«å’ªæ£€æµ‹æ–¹æ³•å¾€å¾€ä¾èµ–äºæ‰‹å·¥ç‰¹å¾æå–å’Œç®€å•çš„åˆ†ç±»å™¨ï¼Œéš¾ä»¥åº”å¯¹å¤æ‚ç¯å¢ƒä¸‹çš„å˜åŒ–ï¼Œå¦‚å…‰ç…§ã€å§¿æ€å’ŒèƒŒæ™¯çš„å¤šæ ·æ€§ã€‚å› æ­¤ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„ç‰©ä½“æ£€æµ‹æ–¹æ³•é€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚

YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ä»¥å…¶é«˜æ•ˆçš„å®æ—¶æ£€æµ‹èƒ½åŠ›å’Œè¾ƒé«˜çš„å‡†ç¡®ç‡ï¼Œæˆä¸ºç‰©ä½“æ£€æµ‹é¢†åŸŸçš„ä½¼ä½¼è€…ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„æ€§èƒ½å’Œåº”ç”¨èŒƒå›´ã€‚ç„¶è€Œï¼Œå°½ç®¡YOLOv8åœ¨å¤šç§ç‰©ä½“æ£€æµ‹ä»»åŠ¡ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨ç‰¹å®šé¢†åŸŸå¦‚çŒ«å’ªæ£€æµ‹ä¸­ï¼Œä»ç„¶å­˜åœ¨ä¸€äº›æŒ‘æˆ˜ã€‚å°¤å…¶æ˜¯åœ¨æ•°æ®é›†çš„æ„å»ºå’Œæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•æœ‰æ•ˆåˆ©ç”¨æœ‰é™çš„æ ·æœ¬æ•°æ®ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œå‡†ç¡®æ€§ï¼Œæ˜¯å½“å‰ç ”ç©¶çš„å…³é”®é—®é¢˜ã€‚

æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„çŒ«å’ªæ£€æµ‹ç³»ç»Ÿã€‚æˆ‘ä»¬å°†ä½¿ç”¨åŒ…å«2400å¼ çŒ«å’ªå›¾åƒçš„æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†ä¸“æ³¨äºå•ä¸€ç±»åˆ«çš„çŒ«å’ªï¼Œèƒ½å¤Ÿä¸ºæ¨¡å‹æä¾›ç›¸å¯¹é›†ä¸­å’Œæ¸…æ™°çš„è®­ç»ƒæ ·æœ¬ã€‚è¿™ä¸€æ•°æ®é›†çš„æ„å»ºä¸ä»…ä¸ºçŒ«å’ªæ£€æµ‹æä¾›äº†ä¸°å¯Œçš„è§†è§‰ä¿¡æ¯ï¼Œä¹Ÿä¸ºåç»­çš„æ¨¡å‹è®­ç»ƒå’Œä¼˜åŒ–å¥ å®šäº†åŸºç¡€ã€‚é€šè¿‡å¯¹YOLOv8æ¨¡å‹çš„æ”¹è¿›ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•é€šè¿‡æ•°æ®å¢å¼ºã€ç‰¹å¾æå–ä¼˜åŒ–ä»¥åŠè¶…å‚æ•°è°ƒæ•´ç­‰æ‰‹æ®µï¼Œæå‡æ¨¡å‹åœ¨çŒ«å’ªæ£€æµ‹ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚

æœ¬ç ”ç©¶çš„æ„ä¹‰åœ¨äºï¼Œä¸ä»…ä¸ºçŒ«å’ªæ£€æµ‹æä¾›äº†ä¸€ç§æ–°çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿä¸ºç›¸å…³é¢†åŸŸçš„ç ”ç©¶æä¾›äº†å‚è€ƒã€‚é€šè¿‡æ”¹è¿›YOLOv8æ¨¡å‹ï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿå®ç°æ›´é«˜çš„æ£€æµ‹ç²¾åº¦å’Œæ›´å¿«çš„å¤„ç†é€Ÿåº¦ï¼Œä½¿å¾—çŒ«å’ªæ£€æµ‹ç³»ç»Ÿèƒ½å¤Ÿåœ¨å®é™…åº”ç”¨ä¸­å‘æŒ¥æ›´å¤§çš„ä½œç”¨ã€‚æ­¤å¤–ï¼Œç ”ç©¶æˆæœè¿˜å¯ä»¥ä¸ºå…¶ä»–åŠ¨ç‰©æ£€æµ‹ã€å® ç‰©ç›‘æ§ç­‰ç›¸å…³é¢†åŸŸçš„ç ”ç©¶æä¾›å€Ÿé‰´ï¼Œæ¨åŠ¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨åŠ¨ç‰©è¯†åˆ«å’Œä¿æŠ¤ä¸­çš„åº”ç”¨ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„çŒ«å’ªæ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼ï¼Œä¹Ÿå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚é€šè¿‡å¯¹çŒ«å’ªè¿™ä¸€ç‰¹å®šå¯¹è±¡çš„æ·±å…¥ç ”ç©¶ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä¸ºç‰©ä½“æ£€æµ‹é¢†åŸŸçš„è¿›ä¸€æ­¥å‘å±•è´¡çŒ®ä¸€ä»½åŠ›é‡ï¼ŒåŒæ—¶ä¹Ÿä¸ºå® ç‰©çˆ±å¥½è€…å’ŒåŠ¨ç‰©ä¿æŠ¤ç»„ç»‡æä¾›æ›´ä¸ºé«˜æ•ˆçš„å·¥å…·å’Œæ–¹æ³•ï¼Œä¿ƒè¿›äººä¸åŠ¨ç‰©ä¹‹é—´çš„å’Œè°å…±å¤„ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1HbtoetErT/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 1
names: ['cat']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åä¸ºâ€œmickey finderâ€çš„æ•°æ®é›†ï¼Œä»¥æ”¹è¿›YOLOv8æ¨¡å‹åœ¨çŒ«å’ªæ£€æµ‹ä»»åŠ¡ä¸­çš„æ€§èƒ½ã€‚è¯¥æ•°æ®é›†ä¸“æ³¨äºçŒ«å’ªè¿™ä¸€ç‰¹å®šç±»åˆ«ï¼Œæ—¨åœ¨ä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹æä¾›é«˜è´¨é‡çš„è®­ç»ƒæ•°æ®ï¼Œä»è€Œæå‡å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚æ•°æ®é›†çš„ç±»åˆ«æ•°é‡ä¸º1ï¼Œå”¯ä¸€çš„ç±»åˆ«ä¸ºâ€œcatâ€ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„æ•°æ®æ ·æœ¬å‡å›´ç»•è¿™ä¸€ä¸»é¢˜è¿›è¡Œæ”¶é›†å’Œæ ‡æ³¨ã€‚

â€œmickey finderâ€æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œç¡®ä¿äº†æ•°æ®çš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§ã€‚æ•°æ®é›†ä¸­çš„å›¾åƒæ¥æºäºä¸åŒçš„ç¯å¢ƒå’Œåœºæ™¯ï¼ŒåŒ…æ‹¬å®¤å†…å’Œå®¤å¤–ï¼Œç™½å¤©å’Œå¤œæ™šï¼Œç”šè‡³ä¸åŒçš„å¤©æ°”æ¡ä»¶ã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå­¦ä¹ åˆ°çŒ«å’ªåœ¨å„ç§èƒŒæ™¯ä¸‹çš„ç‰¹å¾ï¼Œä»è€Œæé«˜å…¶åœ¨çœŸå®ä¸–ç•Œåº”ç”¨ä¸­çš„æ³›åŒ–èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­åŒ…å«äº†ä¸åŒå“ç§ã€é¢œè‰²å’Œä½“å‹çš„çŒ«å’ªï¼Œè¿™è¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹å¯¹çŒ«å’ªå¤–è§‚å˜åŒ–çš„é€‚åº”æ€§ã€‚

åœ¨æ•°æ®æ ‡æ³¨æ–¹é¢ï¼Œæ‰€æœ‰å›¾åƒå‡ç»è¿‡ä¸“ä¸šæ ‡æ³¨äººå‘˜çš„ä»”ç»†å®¡æ ¸å’Œæ ‡æ³¨ï¼Œç¡®ä¿æ¯ä¸€åªçŒ«å’ªéƒ½è¢«å‡†ç¡®åœ°æ¡†å®šå’Œæ ‡è¯†ã€‚æ ‡æ³¨çš„å‡†ç¡®æ€§æ˜¯å½±å“æ¨¡å‹æ€§èƒ½çš„å…³é”®å› ç´ ä¹‹ä¸€ï¼Œå› æ­¤æˆ‘ä»¬ç‰¹åˆ«é‡è§†è¿™ä¸€ç¯èŠ‚ã€‚é€šè¿‡ä½¿ç”¨é«˜è´¨é‡çš„æ ‡æ³¨å·¥å…·å’Œä¸¥æ ¼çš„å®¡æ ¸æµç¨‹ï¼Œæˆ‘ä»¬åŠ›æ±‚ä¸ºYOLOv8æ¨¡å‹æä¾›æœ€ä¼˜è´¨çš„è®­ç»ƒæ•°æ®ã€‚

æ•°æ®é›†çš„è§„æ¨¡ä¹Ÿæ˜¯å½±å“æ¨¡å‹è®­ç»ƒæ•ˆæœçš„é‡è¦å› ç´ ã€‚â€œmickey finderâ€æ•°æ®é›†åŒ…å«äº†æ•°åƒå¼ çŒ«å’ªå›¾åƒï¼Œè¶³ä»¥æ”¯æ’‘æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒéœ€æ±‚ã€‚æ•°æ®é›†çš„å¤§å°ä¸ä»…èƒ½å¤Ÿå¸®åŠ©æ¨¡å‹å­¦ä¹ åˆ°ä¸°å¯Œçš„ç‰¹å¾ï¼Œè¿˜èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£è¿‡æ‹Ÿåˆé—®é¢˜ã€‚ä¸ºäº†è¿›ä¸€æ­¥æå‡æ¨¡å‹çš„é²æ£’æ€§ï¼Œæˆ‘ä»¬è¿˜é‡‡ç”¨äº†æ•°æ®å¢å¼ºæŠ€æœ¯ï¼ŒåŒ…æ‹¬å›¾åƒæ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªå’Œé¢œè‰²è°ƒæ•´ç­‰ï¼Œç¡®ä¿æ¨¡å‹åœ¨é¢å¯¹ä¸åŒçš„è¾“å…¥æ—¶èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚

åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†â€œmickey finderâ€æ•°æ®é›†ä¸YOLOv8æ¨¡å‹ç›¸ç»“åˆï¼Œåˆ©ç”¨å…¶å…ˆè¿›çš„ç‰¹å¾æå–å’Œç›®æ ‡æ£€æµ‹èƒ½åŠ›ï¼Œæ—¨åœ¨å®ç°é«˜æ•ˆçš„çŒ«å’ªæ£€æµ‹ã€‚YOLOv8ä½œä¸ºä¸€ç§æœ€æ–°çš„ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œå…·æœ‰å¿«é€Ÿçš„æ¨ç†é€Ÿåº¦å’Œè¾ƒé«˜çš„æ£€æµ‹ç²¾åº¦ï¼Œèƒ½å¤Ÿæ»¡è¶³å®æ—¶åº”ç”¨çš„éœ€æ±‚ã€‚é€šè¿‡å¯¹â€œmickey finderâ€æ•°æ®é›†çš„è®­ç»ƒï¼Œæˆ‘ä»¬æœŸæœ›æ¨¡å‹èƒ½å¤Ÿåœ¨å„ç§å¤æ‚åœºæ™¯ä¸­å‡†ç¡®è¯†åˆ«å’Œå®šä½çŒ«å’ªï¼Œä¸ºåç»­çš„åº”ç”¨å¼€å‘æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œâ€œmickey finderâ€æ•°æ®é›†ä¸ºæ”¹è¿›YOLOv8çš„çŒ«å’ªæ£€æµ‹ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„è®­ç»ƒèµ„æºã€‚å…¶ç‹¬ç‰¹çš„è®¾è®¡ç†å¿µå’Œé«˜è´¨é‡çš„æ•°æ®æ ‡æ³¨ï¼Œä½¿å¾—è¯¥æ•°æ®é›†åœ¨çŒ«å’ªæ£€æµ‹é¢†åŸŸå…·æœ‰é‡è¦çš„åº”ç”¨ä»·å€¼ã€‚é€šè¿‡å¯¹è¯¥æ•°æ®é›†çš„æ·±å…¥ç ”ç©¶å’Œåˆ†æï¼Œæˆ‘ä»¬ç›¸ä¿¡èƒ½å¤Ÿæ¨åŠ¨çŒ«å’ªæ£€æµ‹æŠ€æœ¯çš„å‘å±•ï¼Œå¹¶ä¸ºç›¸å…³é¢†åŸŸçš„ç ”ç©¶æä¾›æœ‰åŠ›æ”¯æŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ä½œä¸ºYOLOç³»åˆ—ä¸­çš„é‡è¦ä¸€å‘˜ï¼Œç»§æ‰¿äº†å‰å‡ ä»£æ¨¡å‹çš„è®¾è®¡ç†å¿µï¼ŒåŒæ—¶åœ¨å¤šæ–¹é¢è¿›è¡Œäº†åˆ›æ–°å’Œæ”¹è¿›ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯å®ç°é«˜æ•ˆçš„ç›®æ ‡æ£€æµ‹ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚ç¯å¢ƒä¸‹çš„åº”ç”¨ï¼Œå¦‚å°ç›®æ ‡çš„æ£€æµ‹å’ŒèƒŒæ™¯å¤šæ ·æ€§çš„å¤„ç†ã€‚YOLOv8çš„è®¾è®¡å›´ç»•ç€å‡ ä¸ªå…³é”®æ¨¡å—å±•å¼€ï¼ŒåŒ…æ‹¬è¾“å…¥ç«¯ã€ä¸»å¹²ç½‘ç»œã€Neckç«¯å’Œè¾“å‡ºç«¯ï¼Œæ¯ä¸ªæ¨¡å—éƒ½åœ¨ä¼˜åŒ–ç®—æ³•æ€§èƒ½æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚

é¦–å…ˆï¼ŒYOLOv8åœ¨æ•°æ®é¢„å¤„ç†æ–¹é¢å»¶ç»­äº†YOLOv5çš„ç­–ç•¥ï¼Œé‡‡ç”¨äº†å¤šç§æ•°æ®å¢å¼ºæŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬é©¬èµ›å…‹å¢å¼ºã€æ··åˆå¢å¼ºã€ç©ºé—´æ‰°åŠ¨å’Œé¢œè‰²æ‰°åŠ¨ç­‰ï¼Œæ—¨åœ¨æé«˜æ¨¡å‹å¯¹ä¸åŒåœºæ™¯å’Œæ¡ä»¶çš„é€‚åº”èƒ½åŠ›ã€‚é€šè¿‡è¿™äº›å¢å¼ºæ‰‹æ®µï¼ŒYOLOv8èƒ½å¤Ÿåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç”Ÿæˆæ›´åŠ å¤šæ ·åŒ–çš„æ ·æœ¬ï¼Œä»è€Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œé²æ£’æ€§ã€‚

åœ¨ä¸»å¹²ç½‘ç»œç»“æ„æ–¹é¢ï¼ŒYOLOv8å¯¹YOLOv5çš„è®¾è®¡è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé‡‡ç”¨äº†C2fæ¨¡å—æ›¿ä»£äº†åŸæœ‰çš„C3æ¨¡å—ã€‚C2fæ¨¡å—é€šè¿‡å¼•å…¥æ›´å¤šçš„åˆ†æ”¯ç»“æ„ï¼Œå¢å¼ºäº†ç‰¹å¾æå–è¿‡ç¨‹ä¸­çš„æ¢¯åº¦æµåŠ¨ã€‚è¿™ç§è®¾è®¡ä¸ä»…æé«˜äº†ç‰¹å¾çš„è¡¨è¾¾èƒ½åŠ›ï¼Œè¿˜ä½¿å¾—ç½‘ç»œåœ¨åå‘ä¼ æ’­æ—¶èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°ä¼ é€’ä¿¡æ¯ï¼Œè¿›è€Œæå‡äº†æ¨¡å‹çš„æ•´ä½“æ€§èƒ½ã€‚ä¸»å¹²ç½‘ç»œé€šè¿‡å·ç§¯å’Œæ± åŒ–æ“ä½œæå–å›¾åƒç‰¹å¾ï¼Œä¸ºåç»­çš„ç›®æ ‡æ£€æµ‹æä¾›äº†ä¸°å¯Œçš„ç‰¹å¾ä¿¡æ¯ã€‚

YOLOv8çš„Neckç«¯é‡‡ç”¨äº†FPNï¼ˆç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼‰å’ŒPANï¼ˆè·¯å¾„èšåˆç½‘ç»œï¼‰çš„ç»“åˆï¼Œæ—¨åœ¨å……åˆ†èåˆä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ã€‚è¿™ä¸€ç»“æ„é€šè¿‡ä¸Šé‡‡æ ·å’Œä¸‹é‡‡æ ·æ“ä½œï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿåœ¨å¤šå°ºåº¦ä¸Šè¿›è¡Œç‰¹å¾çš„æœ‰æ•ˆèåˆï¼Œä»è€Œæé«˜å¯¹å°ç›®æ ‡çš„æ£€æµ‹èƒ½åŠ›ã€‚FPN-PANç»“æ„çš„è®¾è®¡ä¸ä»…ä¿ç•™äº†é«˜å±‚ç‰¹å¾çš„è¯­ä¹‰ä¿¡æ¯ï¼Œè¿˜ç»“åˆäº†ä½å±‚ç‰¹å¾çš„ç©ºé—´ä¿¡æ¯ï¼Œä½¿å¾—æ¨¡å‹åœ¨å¤„ç†å¤æ‚èƒŒæ™¯æ—¶è¡¨ç°å¾—æ›´åŠ å‡ºè‰²ã€‚

åœ¨è¾“å‡ºç«¯ï¼ŒYOLOv8å¼•å…¥äº†â€œè§£è€¦å¤´â€çš„ç»“æ„ï¼Œå°†åˆ†ç±»å’Œå›å½’ä»»åŠ¡åˆ†å¼€å¤„ç†ã€‚è¿™ä¸€è®¾è®¡ä½¿å¾—æ¨¡å‹åœ¨è¿›è¡Œç›®æ ‡æ£€æµ‹æ—¶ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ä¸“æ³¨äºæ¯ä¸ªä»»åŠ¡çš„ç‰¹å¾æå–å’Œä¼˜åŒ–ï¼Œè¿›è€Œæé«˜æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚è§£è€¦å¤´ç»“æ„çš„å®ç°ä¾èµ–äºä¸¤æ¡å¹¶è¡Œçš„åˆ†æ”¯ï¼Œåˆ†åˆ«è´Ÿè´£æå–ç±»åˆ«ç‰¹å¾å’Œä½ç½®ç‰¹å¾ï¼Œæœ€ç»ˆé€šè¿‡1Ã—1å·ç§¯å±‚å®Œæˆåˆ†ç±»å’Œå®šä½çš„ä»»åŠ¡ã€‚è¿™ç§è®¾è®¡ä¸ä»…æå‡äº†æ¨¡å‹çš„çµæ´»æ€§ï¼Œè¿˜å‡å°‘äº†è®¡ç®—èµ„æºçš„æ¶ˆè€—ã€‚

YOLOv8åœ¨æ ‡ç­¾åˆ†é…ç­–ç•¥ä¸Šä¹Ÿè¿›è¡Œäº†åˆ›æ–°ï¼Œé‡‡ç”¨äº†åŠ¨æ€æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œé¿å…äº†ä¾èµ–äºæ•°æ®é›†çš„é™æ€å€™é€‰æ¡†ç­–ç•¥ã€‚è¿™ä¸€ç­–ç•¥ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ ¹æ®å®é™…çš„ç›®æ ‡åˆ†å¸ƒåŠ¨æ€è°ƒæ•´æ­£è´Ÿæ ·æœ¬çš„åŒ¹é…ï¼Œä»è€Œæé«˜äº†è®­ç»ƒæ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚YOLOv8çš„æŸå¤±å‡½æ•°è®¾è®¡ä¹Ÿç›¸åº”è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåˆ†ç±»æŸå¤±é‡‡ç”¨äº†å˜ç„¦æŸå¤±ï¼ˆVarifocal Lossï¼‰ï¼Œè€Œå›å½’æŸå¤±åˆ™ç»“åˆäº†CIoUå’ŒDFLæŸå¤±ï¼Œæ—¨åœ¨æå‡æ¨¡å‹çš„ç²¾åº¦å’Œæ³›åŒ–èƒ½åŠ›ã€‚

å°½ç®¡YOLOv8åœ¨å¤šä¸ªæ–¹é¢å–å¾—äº†æ˜¾è‘—çš„è¿›å±•ï¼Œä½†åœ¨ç‰¹å®šåº”ç”¨åœºæ™¯ä¸‹ä»ç„¶é¢ä¸´æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚æ°´é¢ç¯å¢ƒä¸­å°ç›®æ ‡çš„æ£€æµ‹ã€‚å°ç›®æ ‡æ¼‚æµ®ç‰©çš„ç‰¹å¾å¤æ‚ä¸”èƒŒæ™¯å¤šæ ·ï¼Œå¯¼è‡´YOLOv8åœ¨å®šä½å’Œæ„ŸçŸ¥èƒ½åŠ›ä¸Šå­˜åœ¨ä¸€å®šçš„ä¸è¶³ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†YOLOv8-WSSODç®—æ³•ï¼Œé€šè¿‡å¼•å…¥BiFormeråŒå±‚è·¯ç”±æ³¨æ„åŠ›æœºåˆ¶æ„å»ºC2fBFæ¨¡å—ï¼Œæ—¨åœ¨å‡è½»ä¸»å¹²ç½‘ç»œä¸‹é‡‡æ ·è¿‡ç¨‹ä¸­çš„å™ªå£°å½±å“ï¼Œä¿ç•™æ›´ç»†ç²’åº¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œé’ˆå¯¹å°ç›®æ ‡æ¼æ£€é—®é¢˜ï¼ŒYOLOv8-WSSODç®—æ³•è¿˜å¢åŠ äº†ä¸€ä¸ªæ›´å°çš„æ£€æµ‹å¤´ï¼Œä»¥æå‡ç½‘ç»œå¯¹å°ç›®æ ‡çš„æ„ŸçŸ¥èƒ½åŠ›ï¼Œå¹¶åœ¨Neckç«¯å¼•å…¥GSConvå’ŒSlim-neckæŠ€æœ¯ï¼Œä»¥ä¿æŒç²¾åº¦çš„åŒæ—¶é™ä½è®¡ç®—é‡ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8ç®—æ³•é€šè¿‡å¤šæ–¹é¢çš„åˆ›æ–°ä¸æ”¹è¿›ï¼Œæ˜¾è‘—æå‡äº†ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦å’Œé€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚ç¯å¢ƒä¸‹çš„åº”ç”¨èƒ½åŠ›ã€‚å…¶æ¨¡å—åŒ–è®¾è®¡å’Œçµæ´»çš„æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œä½¿å¾—YOLOv8åœ¨å¤„ç†å¤šæ ·åŒ–çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡æ—¶å±•ç°å‡ºè‰¯å¥½çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œé’ˆå¯¹ç‰¹å®šåœºæ™¯çš„æŒ‘æˆ˜ï¼Œä»éœ€è¿›ä¸€æ­¥çš„ç ”ç©¶ä¸ä¼˜åŒ–ï¼Œä»¥å®ç°æ›´å¹¿æ³›çš„åº”ç”¨å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 ui.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import sys
import subprocess
from QtFusion.path import abs_path

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤å¹¶è·å–ç»“æœ
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œæ˜¯å¦æˆåŠŸ
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# ä¸»ç¨‹åºå…¥å£
if __name__ == "__main__":
    # è·å–è¦è¿è¡Œçš„è„šæœ¬çš„ç»å¯¹è·¯å¾„
    script_path = abs_path("web.py")

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç´§å¯†ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `subprocess`ï¼šç”¨äºåˆ›å»ºæ–°è¿›ç¨‹ã€è¿æ¥åˆ°å®ƒä»¬çš„è¾“å…¥/è¾“å‡º/é”™è¯¯ç®¡é“ï¼Œå¹¶è·å¾—è¿”å›ç ã€‚
   - `abs_path`ï¼šä» `QtFusion.path` æ¨¡å—å¯¼å…¥çš„å‡½æ•°ï¼Œç”¨äºè·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

2. **`run_script` å‡½æ•°**ï¼š
   - åŠŸèƒ½ï¼šæ¥å—ä¸€ä¸ªè„šæœ¬è·¯å¾„ï¼Œä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡Œè¯¥è„šæœ¬ã€‚
   - å‚æ•°ï¼š`script_path` æ˜¯è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚
   - è¿‡ç¨‹ï¼š
     - è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
     - æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ `streamlit` è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
     - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶æ£€æŸ¥è¿”å›ç ä»¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æˆåŠŸè¿è¡Œã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿ä»£ç ä»…åœ¨ç›´æ¥è¿è¡Œæ—¶æ‰§è¡Œã€‚
   - è·å–è¦è¿è¡Œçš„è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼ˆè¿™é‡Œæ˜¯ `web.py`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `ui.py` çš„ä¸»è¦åŠŸèƒ½æ˜¯è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„ Python è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯é€šè¿‡ Streamlit æ¡†æ¶æ¥å¯åŠ¨ä¸€ä¸ª Web åº”ç”¨ã€‚ä»£ç çš„ç»“æ„ç›¸å¯¹ç®€å•ï¼Œä¸»è¦ç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ã€‚å…¶ä¸­ï¼Œ`sys` æ¨¡å—ç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ï¼Œ`os` æ¨¡å—æä¾›äº†ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ï¼Œè€Œ `subprocess` æ¨¡å—åˆ™ç”¨äºåˆ›å»ºæ–°è¿›ç¨‹ã€è¿æ¥åˆ°å®ƒä»¬çš„è¾“å…¥/è¾“å‡º/é”™è¯¯ç®¡é“ï¼Œå¹¶è·å–å®ƒä»¬çš„è¿”å›ç ã€‚

æ¥ä¸‹æ¥ï¼Œä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º `run_script` çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚ç„¶åï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨å½“å‰çš„ Python è§£é‡Šå™¨å’Œ Streamlit æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚å‘½ä»¤çš„æ ¼å¼æ˜¯ `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `python_path` å’Œ `script_path` ä¼šè¢«å®é™…çš„è·¯å¾„æ›¿æ¢ã€‚

æ¥ç€ï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ–°çš„å­è¿›ç¨‹ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚æ‰§è¡Œå®Œå‘½ä»¤åï¼Œæ£€æŸ¥è¿”å›ç ï¼Œå¦‚æœè¿”å›ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

æœ€åï¼Œåœ¨æ–‡ä»¶çš„ä¸»ç¨‹åºéƒ¨åˆ†ï¼ˆ`if __name__ == "__main__":`ï¼‰ï¼ŒæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œè¿™é‡Œä½¿ç”¨äº† `abs_path("web.py")`ï¼Œè¯¥å‡½æ•°å¯èƒ½æ˜¯ä» `QtFusion.path` æ¨¡å—ä¸­å¯¼å…¥çš„ï¼Œç”¨äºè·å–è„šæœ¬çš„ç»å¯¹è·¯å¾„ã€‚ç„¶åè°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£æ¥è¿è¡Œä¸€ä¸ª Streamlit Web åº”ç”¨ï¼Œç”¨æˆ·åªéœ€æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œç¨‹åºä¼šè‡ªåŠ¨å¤„ç†ç›¸å…³çš„æ‰§è¡Œç»†èŠ‚ã€‚

#### 11.2 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\rtdetr\val.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
from ultralytics.data import YOLODataset
from ultralytics.models.yolo.detect import DetectionValidator
from ultralytics.utils import ops

class RTDETRDataset(YOLODataset):
    """
    RT-DETRæ•°æ®é›†ç±»ï¼Œç»§æ‰¿è‡ªYOLODatasetç±»ã€‚
    è¯¥ç±»ä¸“ä¸ºRT-DETRç›®æ ‡æ£€æµ‹æ¨¡å‹è®¾è®¡ï¼Œä¼˜åŒ–äº†å®æ—¶æ£€æµ‹å’Œè·Ÿè¸ªä»»åŠ¡ã€‚
    """

    def __init__(self, *args, data=None, **kwargs):
        """åˆå§‹åŒ–RTDETRDatasetç±»ï¼Œè°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚"""
        super().__init__(*args, data=data, use_segments=False, use_keypoints=False, **kwargs)

    def load_image(self, i, rect_mode=False):
        """ä»æ•°æ®é›†ä¸­åŠ è½½ç´¢å¼•ä¸º'i'çš„å›¾åƒï¼Œè¿”å›å›¾åƒåŠå…¶è°ƒæ•´åçš„å°ºå¯¸ã€‚"""
        return super().load_image(i=i, rect_mode=rect_mode)

    def build_transforms(self, hyp=None):
        """æ„å»ºæ•°æ®é¢„å¤„ç†å˜æ¢ï¼Œä»…ç”¨äºè¯„ä¼°ã€‚"""
        if self.augment:
            # æ ¹æ®å¢å¼ºæ–¹å¼è®¾ç½®mosaicå’Œmixupçš„å‚æ•°
            hyp.mosaic = hyp.mosaic if self.augment and not self.rect else 0.0
            hyp.mixup = hyp.mixup if self.augment and not self.rect else 0.0
            transforms = v8_transforms(self, self.imgsz, hyp, stretch=True)
        else:
            transforms = Compose([])  # å¦‚æœæ²¡æœ‰å¢å¼ºï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•å˜æ¢

        # æ·»åŠ æ ¼å¼åŒ–å˜æ¢
        transforms.append(
            Format(bbox_format='xywh',
                   normalize=True,
                   return_mask=self.use_segments,
                   return_keypoint=self.use_keypoints,
                   batch_idx=True,
                   mask_ratio=hyp.mask_ratio,
                   mask_overlap=hyp.overlap_mask))
        return transforms


class RTDETRValidator(DetectionValidator):
    """
    RTDETRValidatorç±»ï¼Œæ‰©å±•äº†DetectionValidatorç±»ï¼Œæä¾›é’ˆå¯¹RT-DETRæ¨¡å‹çš„éªŒè¯åŠŸèƒ½ã€‚
    è¯¥ç±»å…è®¸æ„å»ºRTDETRç‰¹å®šçš„æ•°æ®é›†è¿›è¡ŒéªŒè¯ï¼Œåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶è¿›è¡Œåå¤„ç†ï¼Œå¹¶ç›¸åº”æ›´æ–°è¯„ä¼°æŒ‡æ ‡ã€‚
    """

    def build_dataset(self, img_path, mode='val', batch=None):
        """
        æ„å»ºRTDETRæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºæ–¹å¼ã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        return RTDETRDataset(
            img_path=img_path,
            imgsz=self.args.imgsz,
            batch_size=batch,
            augment=False,  # ä¸è¿›è¡Œå¢å¼º
            hyp=self.args,
            rect=False,  # ä¸ä½¿ç”¨çŸ©å½¢æ¨¡å¼
            cache=self.args.cache or None,
            prefix=colorstr(f'{mode}: '),
            data=self.data)

    def postprocess(self, preds):
        """å¯¹é¢„æµ‹è¾“å‡ºåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ã€‚"""
        bs, _, nd = preds[0].shape  # bs: æ‰¹æ¬¡å¤§å°, nd: é¢„æµ‹ç»´åº¦
        bboxes, scores = preds[0].split((4, nd - 4), dim=-1)  # åˆ†ç¦»è¾¹ç•Œæ¡†å’Œåˆ†æ•°
        bboxes *= self.args.imgsz  # å°†è¾¹ç•Œæ¡†ç¼©æ”¾åˆ°åŸå§‹å›¾åƒå°ºå¯¸
        outputs = [torch.zeros((0, 6), device=bboxes.device)] * bs  # åˆå§‹åŒ–è¾“å‡º

        for i, bbox in enumerate(bboxes):  # éå†æ¯ä¸ªè¾¹ç•Œæ¡†
            bbox = ops.xywh2xyxy(bbox)  # è½¬æ¢è¾¹ç•Œæ¡†æ ¼å¼
            score, cls = scores[i].max(-1)  # è·å–æœ€å¤§åˆ†æ•°å’Œå¯¹åº”çš„ç±»åˆ«
            pred = torch.cat([bbox, score[..., None], cls[..., None]], dim=-1)  # åˆå¹¶è¾¹ç•Œæ¡†ã€åˆ†æ•°å’Œç±»åˆ«
            pred = pred[score.argsort(descending=True)]  # æŒ‰ç…§åˆ†æ•°æ’åº
            outputs[i] = pred  # ä¿å­˜é¢„æµ‹ç»“æœ

        return outputs

    def update_metrics(self, preds, batch):
        """æ›´æ–°è¯„ä¼°æŒ‡æ ‡ã€‚"""
        for si, pred in enumerate(preds):
            idx = batch['batch_idx'] == si  # è·å–å½“å‰æ‰¹æ¬¡çš„ç´¢å¼•
            cls = batch['cls'][idx]  # è·å–å½“å‰æ‰¹æ¬¡çš„ç±»åˆ«
            bbox = batch['bboxes'][idx]  # è·å–å½“å‰æ‰¹æ¬¡çš„è¾¹ç•Œæ¡†
            nl, npr = cls.shape[0], pred.shape[0]  # nl: æ ‡ç­¾æ•°é‡, npr: é¢„æµ‹æ•°é‡
            shape = batch['ori_shape'][si]  # è·å–åŸå§‹å›¾åƒçš„å½¢çŠ¶
            correct_bboxes = torch.zeros(npr, self.niou, dtype=torch.bool, device=self.device)  # åˆå§‹åŒ–æ­£ç¡®è¾¹ç•Œæ¡†

            self.seen += 1  # æ›´æ–°å·²å¤„ç†çš„æ ·æœ¬æ•°é‡

            if npr == 0:  # å¦‚æœæ²¡æœ‰é¢„æµ‹
                if nl:
                    self.stats.append((correct_bboxes, *torch.zeros((2, 0), device=self.device), cls.squeeze(-1)))
                continue

            # å¤„ç†é¢„æµ‹
            if self.args.single_cls:
                pred[:, 5] = 0  # å¦‚æœæ˜¯å•ç±»æ¨¡å¼ï¼Œè®¾ç½®ç±»åˆ«ä¸º0
            predn = pred.clone()  # å…‹éš†é¢„æµ‹ç»“æœ
            predn[..., [0, 2]] *= shape[1] / self.args.imgsz  # å°†é¢„æµ‹è¾¹ç•Œæ¡†è½¬æ¢ä¸ºåŸå§‹ç©ºé—´
            predn[..., [1, 3]] *= shape[0] / self.args.imgsz  # å°†é¢„æµ‹è¾¹ç•Œæ¡†è½¬æ¢ä¸ºåŸå§‹ç©ºé—´

            # è¯„ä¼°
            if nl:
                tbox = ops.xywh2xyxy(bbox)  # è½¬æ¢ç›®æ ‡è¾¹ç•Œæ¡†æ ¼å¼
                tbox[..., [0, 2]] *= shape[1]  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´
                tbox[..., [1, 3]] *= shape[0]  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´
                labelsn = torch.cat((cls, tbox), 1)  # åˆå¹¶ç±»åˆ«å’Œç›®æ ‡è¾¹ç•Œæ¡†
                correct_bboxes = self._process_batch(predn.float(), labelsn)  # å¤„ç†æ‰¹æ¬¡ä»¥è·å–æ­£ç¡®çš„è¾¹ç•Œæ¡†
            self.stats.append((correct_bboxes, pred[:, 4], pred[:, 5], cls.squeeze(-1)))  # æ›´æ–°ç»Ÿè®¡ä¿¡æ¯

            # ä¿å­˜ç»“æœ
            if self.args.save_json:
                self.pred_to_json(predn, batch['im_file'][si])  # ä¿å­˜ä¸ºJSONæ ¼å¼
            if self.args.save_txt:
                file = self.save_dir / 'labels' / f'{Path(batch["im_file"][si]).stem}.txt'
                self.save_one_txt(predn, self.args.save_conf, shape, file)  # ä¿å­˜ä¸ºTXTæ ¼å¼
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **RTDETRDatasetç±»**ï¼šç”¨äºå¤„ç†RT-DETRæ¨¡å‹çš„æ•°æ®é›†ï¼Œç»§æ‰¿è‡ªYOLODatasetç±»ï¼Œé‡å†™äº†åŠ è½½å›¾åƒå’Œæ„å»ºå˜æ¢çš„æ–¹æ³•ã€‚
2. **RTDETRValidatorç±»**ï¼šç”¨äºéªŒè¯RT-DETRæ¨¡å‹çš„ç±»ï¼Œæä¾›äº†æ„å»ºæ•°æ®é›†ã€åå¤„ç†é¢„æµ‹ç»“æœå’Œæ›´æ–°è¯„ä¼°æŒ‡æ ‡çš„æ–¹æ³•ã€‚
3. **åå¤„ç†å’Œè¯„ä¼°**ï¼šåœ¨`postprocess`æ–¹æ³•ä¸­ï¼Œåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶æ¥è¿‡æ»¤é¢„æµ‹ç»“æœï¼Œå¹¶åœ¨`update_metrics`æ–¹æ³•ä¸­æ›´æ–°æ¨¡å‹çš„è¯„ä¼°æŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOv8æ¨¡å‹çš„éªŒè¯è¿‡ç¨‹çš„å®ç°ï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªç±»ï¼š`RTDETRDataset`å’Œ`RTDETRValidator`ã€‚æ–‡ä»¶é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬è·¯å¾„å¤„ç†ã€PyTorchã€æ•°æ®é›†ç±»ã€æ•°æ®å¢å¼ºæ–¹æ³•ã€æ£€æµ‹éªŒè¯å™¨å’Œä¸€äº›å·¥å…·å‡½æ•°ã€‚

`RTDETRDataset`ç±»æ˜¯ä»`YOLODataset`ç±»ç»§æ‰¿è€Œæ¥çš„ï¼Œä¸“é—¨ä¸ºå®æ—¶æ£€æµ‹å’Œè·Ÿè¸ªï¼ˆRT-DETRï¼‰æ¨¡å‹è®¾è®¡ã€‚å®ƒçš„æ„é€ å‡½æ•°åˆå§‹åŒ–äº†æ•°æ®é›†ï¼Œå¹¶è®¾ç½®äº†ä¸€äº›å‚æ•°ï¼Œå¦‚ä¸ä½¿ç”¨åˆ†æ®µå’Œå…³é”®ç‚¹ã€‚`load_image`æ–¹æ³•ç”¨äºåŠ è½½æŒ‡å®šç´¢å¼•çš„å›¾åƒï¼Œå¹¶è¿”å›å›¾åƒåŠå…¶è°ƒæ•´åçš„å°ºå¯¸ã€‚`build_transforms`æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®å¢å¼ºçš„è½¬æ¢ï¼Œä¸»è¦ç”¨äºè¯„ä¼°é˜¶æ®µã€‚å¦‚æœå¯ç”¨äº†å¢å¼ºï¼Œå®ƒä¼šæ ¹æ®ä¼ å…¥çš„è¶…å‚æ•°è®¾ç½®ä¸åŒçš„å¢å¼ºæ–¹å¼ï¼Œå¹¶æœ€ç»ˆè¿”å›ä¸€ä¸ªè½¬æ¢ç»„åˆã€‚

`RTDETRValidator`ç±»ç»§æ‰¿è‡ª`DetectionValidator`ï¼Œæä¾›äº†é’ˆå¯¹RT-DETRæ¨¡å‹çš„éªŒè¯åŠŸèƒ½ã€‚å®ƒçš„`build_dataset`æ–¹æ³•ç”¨äºæ„å»ºRT-DETRæ•°æ®é›†ï¼Œæ¥å—å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹æ¬¡å¤§å°ç­‰å‚æ•°ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª`RTDETRDataset`å®ä¾‹ã€‚`postprocess`æ–¹æ³•å¯¹é¢„æµ‹ç»“æœåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼Œä»¥è¿‡æ»¤æ‰é‡å çš„è¾¹ç•Œæ¡†ï¼Œå¹¶è¿”å›å¤„ç†åçš„è¾“å‡ºã€‚`update_metrics`æ–¹æ³•ç”¨äºæ›´æ–°è¯„ä¼°æŒ‡æ ‡ï¼Œè®¡ç®—é¢„æµ‹æ¡†ä¸çœŸå®æ¡†ä¹‹é—´çš„æ­£ç¡®æ€§ï¼Œå¹¶è®°å½•ç›¸å…³ç»Ÿè®¡ä¿¡æ¯ã€‚å®ƒè¿˜æ”¯æŒå°†é¢„æµ‹ç»“æœä¿å­˜ä¸ºJSONæˆ–TXTæ ¼å¼ï¼Œä»¥ä¾¿åç»­åˆ†æã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†YOLOv8æ¨¡å‹åœ¨å®æ—¶æ£€æµ‹å’Œè·Ÿè¸ªä»»åŠ¡ä¸­çš„éªŒè¯è¿‡ç¨‹ï¼Œæä¾›äº†æ•°æ®é›†çš„æ„å»ºã€é¢„æµ‹ç»“æœçš„åå¤„ç†å’Œè¯„ä¼°æŒ‡æ ‡çš„æ›´æ–°ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºæ¨¡å‹çš„æ€§èƒ½è¯„ä¼°å’Œè°ƒè¯•ã€‚

#### 11.3 code\ultralytics\trackers\track.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license

from functools import partial
from pathlib import Path
import torch
from ultralytics.utils import IterableSimpleNamespace, yaml_load
from ultralytics.utils.checks import check_yaml
from .bot_sort import BOTSORT
from .byte_tracker import BYTETracker

# è·Ÿè¸ªå™¨ç±»å‹ä¸å¯¹åº”çš„è·Ÿè¸ªå™¨ç±»çš„æ˜ å°„
TRACKER_MAP = {"bytetrack": BYTETracker, "botsort": BOTSORT}

def on_predict_start(predictor: object, persist: bool = False) -> None:
    """
    åœ¨é¢„æµ‹å¼€å§‹æ—¶åˆå§‹åŒ–å¯¹è±¡è·Ÿè¸ªå™¨ã€‚

    å‚æ•°:
        predictor (object): ç”¨äºåˆå§‹åŒ–è·Ÿè¸ªå™¨çš„é¢„æµ‹å™¨å¯¹è±¡ã€‚
        persist (bool, optional): å¦‚æœè·Ÿè¸ªå™¨å·²å­˜åœ¨ï¼Œæ˜¯å¦ä¿æŒå…¶çŠ¶æ€ã€‚é»˜è®¤ä¸º Falseã€‚

    å¼‚å¸¸:
        AssertionError: å¦‚æœ tracker_type ä¸æ˜¯ 'bytetrack' æˆ– 'botsort'ã€‚
    """
    # æ£€æŸ¥ä»»åŠ¡ç±»å‹æ˜¯å¦ä¸º OBBï¼ˆæ–¹å‘æ€§è¾¹ç•Œæ¡†ï¼‰ï¼Œå¦‚æœæ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸
    if predictor.args.task == "obb":
        raise NotImplementedError("ERROR âŒ OBB ä»»åŠ¡ä¸æ”¯æŒè·Ÿè¸ªæ¨¡å¼ï¼")
    
    # å¦‚æœé¢„æµ‹å™¨å·²æœ‰è·Ÿè¸ªå™¨ä¸”éœ€è¦ä¿æŒçŠ¶æ€ï¼Œåˆ™ç›´æ¥è¿”å›
    if hasattr(predictor, "trackers") and persist:
        return

    # æ£€æŸ¥å¹¶åŠ è½½è·Ÿè¸ªå™¨çš„é…ç½®æ–‡ä»¶
    tracker = check_yaml(predictor.args.tracker)
    cfg = IterableSimpleNamespace(**yaml_load(tracker))

    # ç¡®ä¿è·Ÿè¸ªå™¨ç±»å‹æ˜¯æ”¯æŒçš„ç±»å‹
    if cfg.tracker_type not in ["bytetrack", "botsort"]:
        raise AssertionError(f"ç›®å‰åªæ”¯æŒ 'bytetrack' å’Œ 'botsort'ï¼Œä½†å¾—åˆ°äº† '{cfg.tracker_type}'")

    # åˆå§‹åŒ–è·Ÿè¸ªå™¨åˆ—è¡¨
    trackers = []
    for _ in range(predictor.dataset.bs):
        # æ ¹æ®é…ç½®åˆ›å»ºå¯¹åº”çš„è·Ÿè¸ªå™¨å®ä¾‹
        tracker = TRACKER_MAP[cfg.tracker_type](args=cfg, frame_rate=30)
        trackers.append(tracker)
    
    # å°†åˆ›å»ºçš„è·Ÿè¸ªå™¨åˆ—è¡¨èµ‹å€¼ç»™é¢„æµ‹å™¨
    predictor.trackers = trackers

def on_predict_postprocess_end(predictor: object, persist: bool = False) -> None:
    """
    åœ¨é¢„æµ‹åå¤„ç†ç»“æŸæ—¶ï¼Œæ›´æ–°æ£€æµ‹åˆ°çš„æ¡†å¹¶è¿›è¡Œå¯¹è±¡è·Ÿè¸ªã€‚

    å‚æ•°:
        predictor (object): åŒ…å«é¢„æµ‹ç»“æœçš„é¢„æµ‹å™¨å¯¹è±¡ã€‚
        persist (bool, optional): å¦‚æœè·Ÿè¸ªå™¨å·²å­˜åœ¨ï¼Œæ˜¯å¦ä¿æŒå…¶çŠ¶æ€ã€‚é»˜è®¤ä¸º Falseã€‚
    """
    bs = predictor.dataset.bs  # æ‰¹é‡å¤§å°
    path, im0s = predictor.batch[:2]  # è·å–è·¯å¾„å’Œå›¾åƒæ•°æ®

    for i in range(bs):
        # å¦‚æœä¸ä¿æŒçŠ¶æ€ä¸”è§†é¢‘è·¯å¾„ä¸åŒï¼Œåˆ™é‡ç½®è·Ÿè¸ªå™¨
        if not persist and predictor.vid_path[i] != str(predictor.save_dir / Path(path[i]).name):  # æ–°è§†é¢‘
            predictor.trackers[i].reset()

        # è·å–å½“å‰æ£€æµ‹ç»“æœ
        det = predictor.results[i].boxes.cpu().numpy()
        if len(det) == 0:
            continue  # å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°ç‰©ä½“ï¼Œåˆ™è·³è¿‡

        # æ›´æ–°è·Ÿè¸ªå™¨å¹¶è·å–è·Ÿè¸ªç»“æœ
        tracks = predictor.trackers[i].update(det, im0s[i])
        if len(tracks) == 0:
            continue  # å¦‚æœæ²¡æœ‰è·Ÿè¸ªåˆ°ç‰©ä½“ï¼Œåˆ™è·³è¿‡

        # è·å–æœ‰æ•ˆçš„è·Ÿè¸ªç´¢å¼•
        idx = tracks[:, -1].astype(int)
        predictor.results[i] = predictor.results[i][idx]  # æ›´æ–°é¢„æµ‹ç»“æœ
        predictor.results[i].update(boxes=torch.as_tensor(tracks[:, :-1]))  # æ›´æ–°è¾¹ç•Œæ¡†

def register_tracker(model: object, persist: bool) -> None:
    """
    ä¸ºæ¨¡å‹æ³¨å†Œè·Ÿè¸ªå›è°ƒï¼Œä»¥ä¾¿åœ¨é¢„æµ‹æœŸé—´è¿›è¡Œå¯¹è±¡è·Ÿè¸ªã€‚

    å‚æ•°:
        model (object): è¦æ³¨å†Œè·Ÿè¸ªå›è°ƒçš„æ¨¡å‹å¯¹è±¡ã€‚
        persist (bool): å¦‚æœè·Ÿè¸ªå™¨å·²å­˜åœ¨ï¼Œæ˜¯å¦ä¿æŒå…¶çŠ¶æ€ã€‚
    """
    # æ³¨å†Œé¢„æµ‹å¼€å§‹æ—¶çš„å›è°ƒ
    model.add_callback("on_predict_start", partial(on_predict_start, persist=persist))
    # æ³¨å†Œé¢„æµ‹åå¤„ç†ç»“æŸæ—¶çš„å›è°ƒ
    model.add_callback("on_predict_postprocess_end", partial(on_predict_postprocess_end, persist=persist))
```

### ä»£ç è¯´æ˜ï¼š
1. **TRACKER_MAP**: å®šä¹‰äº†è·Ÿè¸ªå™¨ç±»å‹ä¸å…¶å¯¹åº”ç±»çš„æ˜ å°„å…³ç³»ã€‚
2. **on_predict_start**: åœ¨é¢„æµ‹å¼€å§‹æ—¶åˆå§‹åŒ–è·Ÿè¸ªå™¨ï¼Œæ£€æŸ¥ä»»åŠ¡ç±»å‹å’Œè·Ÿè¸ªå™¨é…ç½®ï¼Œåˆ›å»ºç›¸åº”çš„è·Ÿè¸ªå™¨å®ä¾‹ã€‚
3. **on_predict_postprocess_end**: åœ¨é¢„æµ‹åå¤„ç†ç»“æŸæ—¶ï¼Œæ›´æ–°æ£€æµ‹æ¡†å¹¶è¿›è¡Œå¯¹è±¡è·Ÿè¸ªï¼Œå¤„ç†æ–°è§†é¢‘çš„æƒ…å†µå¹¶æ›´æ–°é¢„æµ‹ç»“æœã€‚
4. **register_tracker**: æ³¨å†Œè·Ÿè¸ªå›è°ƒå‡½æ•°ï¼Œä»¥ä¾¿åœ¨æ¨¡å‹é¢„æµ‹æ—¶è‡ªåŠ¨è°ƒç”¨è·Ÿè¸ªå™¨çš„åˆå§‹åŒ–å’Œæ›´æ–°é€»è¾‘ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ä¸»è¦å®ç°äº†åœ¨ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸­é›†æˆå¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ã€‚å®ƒå®šä¹‰äº†ä¸€äº›å‡½æ•°ï¼Œç”¨äºåœ¨é¢„æµ‹è¿‡ç¨‹ä¸­åˆå§‹åŒ–å’Œæ›´æ–°è·Ÿè¸ªå™¨ã€‚æ–‡ä»¶ä¸­ä½¿ç”¨äº†Ultralytics YOLOæ¡†æ¶ï¼Œå¹¶ä¾èµ–äºPyTorchåº“ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œç±»ï¼ŒåŒ…æ‹¬`partial`ã€`Path`ã€`torch`ä»¥åŠä¸€äº›Ultralyticsçš„å·¥å…·å‡½æ•°å’Œè·Ÿè¸ªå™¨ç±»ã€‚`TRACKER_MAP`å­—å…¸å°†è·Ÿè¸ªå™¨ç±»å‹æ˜ å°„åˆ°ç›¸åº”çš„è·Ÿè¸ªå™¨ç±»ï¼Œæ”¯æŒâ€œbytetrackâ€å’Œâ€œbotsortâ€ä¸¤ç§è·Ÿè¸ªå™¨ã€‚

`on_predict_start`å‡½æ•°åœ¨é¢„æµ‹å¼€å§‹æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–è·Ÿè¸ªå™¨ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªé¢„æµ‹å™¨å¯¹è±¡å’Œä¸€ä¸ªå¯é€‰çš„æŒä¹…åŒ–å‚æ•°ã€‚å¦‚æœä»»åŠ¡ç±»å‹æ˜¯â€œobbâ€ï¼Œåˆ™æŠ›å‡ºæœªå®ç°çš„å¼‚å¸¸ã€‚æ¥ç€ï¼Œå‡½æ•°æ£€æŸ¥é¢„æµ‹å™¨æ˜¯å¦å·²ç»æœ‰è·Ÿè¸ªå™¨ï¼Œå¦‚æœæŒä¹…åŒ–å‚æ•°ä¸ºçœŸï¼Œåˆ™ç›´æ¥è¿”å›ã€‚ç„¶åï¼Œå‡½æ•°é€šè¿‡`check_yaml`å‡½æ•°åŠ è½½è·Ÿè¸ªå™¨çš„é…ç½®ï¼Œå¹¶ç¡®ä¿è·Ÿè¸ªå™¨ç±»å‹æ˜¯æ”¯æŒçš„ç±»å‹ä¹‹ä¸€ã€‚æ¥ä¸‹æ¥ï¼Œå‡½æ•°ä¸ºæ¯ä¸ªæ‰¹æ¬¡åˆ›å»ºç›¸åº”çš„è·Ÿè¸ªå™¨å®ä¾‹ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨é¢„æµ‹å™¨çš„`trackers`å±æ€§ä¸­ã€‚

`on_predict_postprocess_end`å‡½æ•°åœ¨é¢„æµ‹åå¤„ç†ç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œç”¨äºæ›´æ–°æ£€æµ‹åˆ°çš„æ¡†å¹¶è¿›è¡Œå¯¹è±¡è·Ÿè¸ªã€‚å®ƒé¦–å…ˆè·å–æ‰¹æ¬¡å¤§å°å’Œå›¾åƒæ•°æ®ã€‚å¯¹äºæ¯ä¸ªè§†é¢‘ï¼Œå¦‚æœä¸æ˜¯æŒä¹…åŒ–ä¸”è§†é¢‘è·¯å¾„ä¸åŒï¼Œåˆ™é‡ç½®ç›¸åº”çš„è·Ÿè¸ªå™¨ã€‚ç„¶åï¼Œå‡½æ•°æå–æ£€æµ‹ç»“æœå¹¶æ›´æ–°è·Ÿè¸ªå™¨ã€‚å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°å¯¹è±¡ï¼Œåˆ™è·³è¿‡è¯¥æ‰¹æ¬¡ã€‚æœ€åï¼Œå‡½æ•°å°†è·Ÿè¸ªç»“æœæ›´æ–°åˆ°é¢„æµ‹ç»“æœä¸­ã€‚

`register_tracker`å‡½æ•°ç”¨äºå°†è·Ÿè¸ªå›è°ƒæ³¨å†Œåˆ°æ¨¡å‹ä¸­ï¼Œä»¥ä¾¿åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚å®ƒæ¥æ”¶æ¨¡å‹å¯¹è±¡å’ŒæŒä¹…åŒ–å‚æ•°ï¼Œå¹¶ä¸ºæ¨¡å‹æ·»åŠ ä¸¤ä¸ªå›è°ƒï¼šä¸€ä¸ªæ˜¯åœ¨é¢„æµ‹å¼€å§‹æ—¶è°ƒç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨é¢„æµ‹åå¤„ç†ç»“æŸæ—¶è°ƒç”¨ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†åœ¨ç›®æ ‡æ£€æµ‹è¿‡ç¨‹ä¸­é›†æˆå¯¹è±¡è·Ÿè¸ªçš„åŠŸèƒ½ï¼Œç¡®ä¿äº†è·Ÿè¸ªå™¨çš„åˆå§‹åŒ–å’Œæ›´æ–°è¿‡ç¨‹çš„æ­£ç¡®æ€§ã€‚

#### 11.4 train.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import random
import numpy as np
import torch.nn as nn
from ultralytics.data import build_dataloader, build_yolo_dataset
from ultralytics.engine.trainer import BaseTrainer
from ultralytics.models import yolo
from ultralytics.nn.tasks import DetectionModel
from ultralytics.utils import LOGGER, RANK
from ultralytics.utils.torch_utils import de_parallel, torch_distributed_zero_first

class DetectionTrainer(BaseTrainer):
    """
    åŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)  # è·å–æ¨¡å‹çš„æœ€å¤§æ­¥å¹…
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­ï¼Œä»…åˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©æ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼ç¼©æ”¾
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ
```

### ä»£ç è¯´æ˜ï¼š
1. **DetectionTrainerç±»**ï¼šè¯¥ç±»è´Ÿè´£YOLOæ¨¡å‹çš„è®­ç»ƒï¼Œç»§æ‰¿è‡ªåŸºç¡€è®­ç»ƒç±»`BaseTrainer`ã€‚
2. **build_datasetæ–¹æ³•**ï¼šæ„å»ºYOLOæ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ã€‚
3. **get_dataloaderæ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å’Œæ•°æ®æ‰“ä¹±ã€‚
4. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦è°ƒæ•´ã€‚
5. **get_modelæ–¹æ³•**ï¼šåˆ›å»ºå¹¶è¿”å›YOLOæ£€æµ‹æ¨¡å‹ï¼Œå¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **plot_training_samplesæ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ³¨é‡Šï¼Œç”¨äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ã€‚
7. **plot_metricsæ–¹æ³•**ï¼šä»CSVæ–‡ä»¶ä¸­æå–å¹¶ç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ï¼Œä¾¿äºç›‘æ§è®­ç»ƒæ•ˆæœã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è„šæœ¬ï¼ŒåŸºäº Ultralytics æä¾›çš„æ¡†æ¶ã€‚å®ƒç»§æ‰¿è‡ª `BaseTrainer` ç±»ï¼Œä¸“æ³¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ ç›¸å…³çš„ PyTorch æ¨¡å—ï¼Œä»¥åŠ Ultralytics æä¾›çš„æ•°æ®å¤„ç†ã€æ¨¡å‹æ„å»ºå’Œè®­ç»ƒå·¥å…·ã€‚

`DetectionTrainer` ç±»æ˜¯è¯¥æ–‡ä»¶çš„æ ¸å¿ƒï¼ŒåŒ…å«å¤šä¸ªæ–¹æ³•æ¥å¤„ç†æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€æ¨¡å‹é¢„å¤„ç†ã€æ¨¡å‹è®¾ç½®ã€æ¨¡å‹è·å–ã€éªŒè¯å™¨è·å–ã€æŸå¤±é¡¹æ ‡è®°ã€è®­ç»ƒè¿›åº¦æ˜¾ç¤ºã€è®­ç»ƒæ ·æœ¬ç»˜å›¾å’ŒæŒ‡æ ‡ç»˜å›¾ç­‰åŠŸèƒ½ã€‚

åœ¨ `build_dataset` æ–¹æ³•ä¸­ï¼Œç¨‹åºæ ¹æ®ç»™å®šçš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ï¼Œæ”¯æŒä¸åŒçš„æ•°æ®å¢å¼ºç­–ç•¥ã€‚`get_dataloader` æ–¹æ³•åˆ™ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å¼é€‰æ‹©æ˜¯å¦æ‰“ä¹±æ•°æ®ã€‚

`preprocess_batch` æ–¹æ³•è´Ÿè´£å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œç±»å‹è½¬æ¢ã€‚è¿™é‡Œè¿˜å®ç°äº†å¤šå°ºåº¦è®­ç»ƒçš„åŠŸèƒ½ï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒå¤§å°æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼Œå¦‚ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚`get_model` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯ä»¥åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„æ£€æµ‹éªŒè¯å™¨ï¼Œ`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ï¼Œä»¥ä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•æ ¼å¼åŒ–å¹¶è¿”å›è®­ç»ƒè¿›åº¦çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº† YOLO æ¨¡å‹è®­ç»ƒçš„å„ä¸ªæ–¹é¢ï¼Œæä¾›äº†ä»æ•°æ®å¤„ç†åˆ°æ¨¡å‹è¯„ä¼°çš„å®Œæ•´æµç¨‹ï¼Œé€‚åˆç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„æ·±åº¦å­¦ä¹ è®­ç»ƒã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\repvit.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import torch
import torch.nn as nn
from timm.models.layers import SqueezeExcite

def _make_divisible(v, divisor, min_value=None):
    """
    ç¡®ä¿æ‰€æœ‰å±‚çš„é€šé“æ•°æ˜¯å¯è¢«æŒ‡å®šæ•°å€¼æ•´é™¤çš„ã€‚
    :param v: è¾“å…¥çš„é€šé“æ•°
    :param divisor: æŒ‡å®šçš„æ•´é™¤æ•°
    :param min_value: æœ€å°å€¼ï¼Œé»˜è®¤ä¸ºdivisor
    :return: å¤„ç†åçš„é€šé“æ•°
    """
    if min_value is None:
        min_value = divisor
    new_v = max(min_value, int(v + divisor / 2) // divisor * divisor)
    if new_v < 0.9 * v:  # ç¡®ä¿å‘ä¸‹å–æ•´ä¸ä¼šå‡å°‘è¶…è¿‡10%
        new_v += divisor
    return new_v

class Conv2d_BN(nn.Sequential):
    """
    åŒ…å«å·ç§¯å±‚å’Œæ‰¹å½’ä¸€åŒ–å±‚çš„ç»„åˆã€‚
    """
    def __init__(self, in_channels, out_channels, kernel_size=1, stride=1, padding=0, dilation=1, groups=1):
        super().__init__()
        # æ·»åŠ å·ç§¯å±‚
        self.add_module('conv', nn.Conv2d(in_channels, out_channels, kernel_size, stride, padding, dilation, groups, bias=False))
        # æ·»åŠ æ‰¹å½’ä¸€åŒ–å±‚
        self.add_module('bn', nn.BatchNorm2d(out_channels))

class RepViTBlock(nn.Module):
    """
    RepViTçš„åŸºæœ¬æ„å»ºå—ï¼ŒåŒ…å«é€šé“æ··åˆå’Œtokenæ··åˆã€‚
    """
    def __init__(self, inp, hidden_dim, oup, kernel_size, stride, use_se, use_hs):
        super(RepViTBlock, self).__init__()
        self.identity = stride == 1 and inp == oup  # åˆ¤æ–­æ˜¯å¦ä¸ºæ’ç­‰æ˜ å°„
        if stride == 2:
            # å½“æ­¥å¹…ä¸º2æ—¶ï¼Œä½¿ç”¨å·ç§¯å’ŒSqueezeExcite
            self.token_mixer = nn.Sequential(
                Conv2d_BN(inp, inp, kernel_size, stride, (kernel_size - 1) // 2, groups=inp),
                SqueezeExcite(inp, 0.25) if use_se else nn.Identity(),
                Conv2d_BN(inp, oup, ks=1, stride=1, pad=0)
            )
        else:
            # å½“æ­¥å¹…ä¸º1æ—¶ï¼Œä½¿ç”¨RepVGGDW
            self.token_mixer = nn.Sequential(
                RepVGGDW(inp),
                SqueezeExcite(inp, 0.25) if use_se else nn.Identity(),
            )
        # é€šé“æ··åˆ
        self.channel_mixer = nn.Sequential(
            Conv2d_BN(oup, hidden_dim, 1, 1, 0),
            nn.GELU() if use_hs else nn.Identity(),
            Conv2d_BN(hidden_dim, oup, 1, 1, 0)
        )

    def forward(self, x):
        return self.channel_mixer(self.token_mixer(x))

class RepViT(nn.Module):
    """
    RepViTæ¨¡å‹ï¼ŒåŒ…å«å¤šä¸ªRepViTBlockã€‚
    """
    def __init__(self, cfgs):
        super(RepViT, self).__init__()
        self.cfgs = cfgs  # é…ç½®åˆ—è¡¨
        layers = []
        input_channel = cfgs[0][2]  # ç¬¬ä¸€ä¸ªé…ç½®çš„è¾“å‡ºé€šé“æ•°
        # æ„å»ºç½‘ç»œå±‚
        for k, t, c, use_se, use_hs, s in self.cfgs:
            output_channel = _make_divisible(c, 8)  # ç¡®ä¿è¾“å‡ºé€šé“æ•°å¯è¢«8æ•´é™¤
            exp_size = _make_divisible(input_channel * t, 8)  # æ‰©å±•é€šé“æ•°
            layers.append(RepViTBlock(input_channel, exp_size, output_channel, k, s, use_se, use_hs))
            input_channel = output_channel  # æ›´æ–°è¾“å…¥é€šé“æ•°
        self.features = nn.ModuleList(layers)  # å­˜å‚¨æ‰€æœ‰å±‚

    def forward(self, x):
        for f in self.features:
            x = f(x)  # é€å±‚å‰å‘ä¼ æ’­
        return x

def repvit_m2_3(weights=''):
    """
    æ„å»ºRepViTæ¨¡å‹çš„ç‰¹å®šé…ç½®ã€‚
    """
    cfgs = [
        # k, t, c, SE, HS, s 
        [3, 2, 80, 1, 0, 1],
        [3, 2, 80, 0, 0, 1],
        # ... çœç•¥å…¶ä»–é…ç½®
        [3, 2, 640, 0, 1, 2],
    ]
    model = RepViT(cfgs)  # åˆ›å»ºæ¨¡å‹
    if weights:
        model.load_state_dict(torch.load(weights)['model'])  # åŠ è½½æƒé‡
    return model

if __name__ == '__main__':
    model = repvit_m2_3('repvit_m2_3_distill_450e.pth')  # å®ä¾‹åŒ–æ¨¡å‹å¹¶åŠ è½½æƒé‡
    inputs = torch.randn((1, 3, 640, 640))  # åˆ›å»ºè¾“å…¥å¼ é‡
    res = model(inputs)  # å‰å‘ä¼ æ’­
    for i in res:
        print(i.size())  # è¾“å‡ºæ¯å±‚çš„å°ºå¯¸
```

### ä»£ç è¯´æ˜ï¼š
1. **_make_divisible**: ç¡®ä¿é€šé“æ•°æ˜¯å¯è¢«8æ•´é™¤çš„å‡½æ•°ã€‚
2. **Conv2d_BN**: ç»„åˆå·ç§¯å±‚å’Œæ‰¹å½’ä¸€åŒ–å±‚çš„ç±»ã€‚
3. **RepViTBlock**: RepViTçš„åŸºæœ¬æ„å»ºå—ï¼Œè´Ÿè´£é€šé“å’Œtokençš„æ··åˆã€‚
4. **RepViT**: æ•´ä¸ªRepViTæ¨¡å‹ï¼ŒåŒ…å«å¤šä¸ªRepViTBlockã€‚
5. **repvit_m2_3**: æ„å»ºç‰¹å®šé…ç½®çš„RepViTæ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **ä¸»ç¨‹åº**: å®ä¾‹åŒ–æ¨¡å‹ï¼Œç”Ÿæˆè¾“å…¥å¹¶è¿›è¡Œå‰å‘ä¼ æ’­ï¼Œè¾“å‡ºæ¯å±‚çš„å°ºå¯¸ã€‚

è¯¥ç¨‹åºæ–‡ä»¶å®ç°äº†ä¸€ä¸ªåŸºäºRepVGGç»“æ„çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œä¸»è¦ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œæ„å»ºäº†ä¸€ä¸ªé«˜æ•ˆçš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

é¦–å…ˆï¼Œå¯¼å…¥äº†å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬PyTorchçš„ç¥ç»ç½‘ç»œæ¨¡å—ã€NumPyä»¥åŠç”¨äºæ„å»ºæ¨¡å‹çš„SqueezeExciteå±‚ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ª`replace_batchnorm`å‡½æ•°ï¼Œç”¨äºå°†ç½‘ç»œä¸­çš„BatchNormå±‚æ›¿æ¢ä¸ºèº«ä»½æ˜ å°„ï¼ˆIdentityï¼‰ï¼Œä»¥ä¾¿åœ¨æ¨ç†æ—¶åŠ é€Ÿè®¡ç®—ã€‚

`_make_divisible`å‡½æ•°ç”¨äºç¡®ä¿æ¯ä¸€å±‚çš„é€šé“æ•°æ˜¯8çš„å€æ•°ï¼Œè¿™åœ¨æŸäº›æ¨¡å‹ä¸­æ˜¯ä¸€ä¸ªå¸¸è§çš„è¦æ±‚ï¼Œä»¥æé«˜è®¡ç®—æ•ˆç‡ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†`Conv2d_BN`ç±»ï¼Œè¯¥ç±»æ˜¯ä¸€ä¸ªåŒ…å«å·ç§¯å±‚å’ŒBatchNormå±‚çš„ç»„åˆã€‚å®ƒåœ¨åˆå§‹åŒ–æ—¶ä¼šå¯¹BatchNormçš„æƒé‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª`fuse_self`æ–¹æ³•ï¼Œç”¨äºå°†å·ç§¯å’ŒBatchNormå±‚èåˆä¸ºä¸€ä¸ªå·ç§¯å±‚ï¼Œä»è€Œå‡å°‘è®¡ç®—é‡ã€‚

`Residual`ç±»å®ç°äº†æ®‹å·®è¿æ¥ï¼Œå…è®¸åœ¨è®­ç»ƒæœŸé—´éšæœºä¸¢å¼ƒéƒ¨åˆ†è¾“å…¥ï¼Œä»¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚å®ƒåŒæ ·æä¾›äº†`fuse_self`æ–¹æ³•ï¼Œç”¨äºèåˆå·ç§¯å±‚å’Œæ®‹å·®è¿æ¥ã€‚

`RepVGGDW`ç±»å®ç°äº†ä¸€ä¸ªç‰¹å®šçš„å·ç§¯ç»“æ„ï¼Œç»“åˆäº†æ·±åº¦å¯åˆ†ç¦»å·ç§¯å’Œæ®‹å·®è¿æ¥ã€‚å®ƒçš„å‰å‘ä¼ æ’­å‡½æ•°å°†è¾“å…¥é€šè¿‡ä¸¤ä¸ªå·ç§¯å±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶åŠ ä¸Šè¾“å…¥æœ¬èº«ï¼Œä»¥å®ç°æ®‹å·®å­¦ä¹ ã€‚

`RepViTBlock`ç±»åˆ™æ˜¯RepVGGçš„ä¸€ä¸ªå—ï¼ŒåŒ…å«äº†Token Mixerå’ŒChannel Mixerã€‚æ ¹æ®æ­¥å¹…çš„ä¸åŒï¼Œä½¿ç”¨ä¸åŒçš„ç»“æ„æ¥å¤„ç†è¾“å…¥ç‰¹å¾ã€‚

`RepViT`ç±»æ˜¯æ•´ä¸ªæ¨¡å‹çš„ä¸»ä½“ï¼Œè´Ÿè´£æ„å»ºç½‘ç»œçš„å„ä¸ªå±‚ã€‚å®ƒæ ¹æ®é…ç½®å‚æ•°æ„å»ºå¤šä¸ªRepViTBlockï¼Œå¹¶åœ¨å‰å‘ä¼ æ’­ä¸­è¿”å›ç‰¹å¾å›¾ã€‚

æ­¤å¤–ï¼Œ`switch_to_deploy`æ–¹æ³•ç”¨äºåœ¨æ¨ç†é˜¶æ®µæ›¿æ¢BatchNormå±‚ï¼Œä»¥æé«˜æ¨ç†é€Ÿåº¦ã€‚

`update_weight`å‡½æ•°ç”¨äºæ›´æ–°æ¨¡å‹çš„æƒé‡ï¼Œç¡®ä¿åŠ è½½çš„æƒé‡ä¸æ¨¡å‹çš„ç»“æ„ç›¸åŒ¹é…ã€‚

æœ€åï¼Œå®šä¹‰äº†å¤šä¸ªå‡½æ•°ï¼ˆå¦‚`repvit_m0_9`ã€`repvit_m1_0`ç­‰ï¼‰ï¼Œè¿™äº›å‡½æ•°æ ¹æ®ä¸åŒçš„é…ç½®å‚æ•°æ„å»ºä¸åŒç‰ˆæœ¬çš„RepViTæ¨¡å‹ï¼Œå¹¶å¯ä»¥é€‰æ‹©æ€§åœ°åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œé€šè¿‡ä¸»ç¨‹åºéƒ¨åˆ†åˆ›å»ºäº†ä¸€ä¸ªRepViTæ¨¡å‹å®ä¾‹ï¼Œå¹¶å¯¹éšæœºè¾“å…¥è¿›è¡Œäº†å‰å‘ä¼ æ’­ï¼Œè¾“å‡ºäº†æ¯ä¸ªç‰¹å¾å›¾çš„å°ºå¯¸ã€‚è¿™æ®µä»£ç å¯ä»¥ç”¨äºæµ‹è¯•æ¨¡å‹çš„æ„å»ºæ˜¯å¦æ­£ç¡®ã€‚

#### 11.6 code\ultralytics\utils\callbacks\wb.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦ä¿ç•™äº†ä¸WandBï¼ˆWeights and Biasesï¼‰é›†æˆå’Œç»˜åˆ¶ç²¾ç¡®åº¦-å¬å›æ›²çº¿ç›¸å…³çš„åŠŸèƒ½ã€‚

```python
# å¯¼å…¥å¿…è¦çš„åº“
import numpy as np
import pandas as pd
import wandb as wb  # å¯¼å…¥WandBåº“ï¼Œç”¨äºå®éªŒè·Ÿè¸ªå’Œå¯è§†åŒ–

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¹¶è®°å½•è‡ªå®šä¹‰çš„ç²¾ç¡®åº¦-å¬å›æ›²çº¿
def _custom_table(x, y, classes, title="Precision Recall Curve", x_title="Recall", y_title="Precision"):
    """
    åˆ›å»ºå¹¶è®°å½•è‡ªå®šä¹‰çš„ç²¾ç¡®åº¦-å¬å›æ›²çº¿å¯è§†åŒ–ã€‚

    å‚æ•°:
        x (List): xè½´çš„å€¼ï¼Œé•¿åº¦ä¸ºNã€‚
        y (List): yè½´çš„å€¼ï¼Œé•¿åº¦ä¸ºNã€‚
        classes (List): æ¯ä¸ªç‚¹çš„ç±»åˆ«æ ‡ç­¾ï¼Œé•¿åº¦ä¸ºNã€‚
        title (str, optional): å›¾è¡¨æ ‡é¢˜ï¼Œé»˜è®¤ä¸º'Precision Recall Curve'ã€‚
        x_title (str, optional): xè½´æ ‡ç­¾ï¼Œé»˜è®¤ä¸º'Recall'ã€‚
        y_title (str, optional): yè½´æ ‡ç­¾ï¼Œé»˜è®¤ä¸º'Precision'ã€‚

    è¿”å›:
        (wandb.Object): é€‚åˆè®°å½•çš„WandBå¯¹è±¡ï¼Œå±•ç¤ºäº†è‡ªå®šä¹‰çš„å¯è§†åŒ–æŒ‡æ ‡ã€‚
    """
    # åˆ›å»ºä¸€ä¸ªDataFrameç”¨äºå­˜å‚¨æ•°æ®
    df = pd.DataFrame({"class": classes, "y": y, "x": x}).round(3)
    fields = {"x": "x", "y": "y", "class": "class"}
    string_fields = {"title": title, "x-axis-title": x_title, "y-axis-title": y_title}
    
    # ä½¿ç”¨WandBçš„plot_tableå‡½æ•°è®°å½•è¡¨æ ¼
    return wb.plot_table(
        "wandb/area-under-curve/v0", wb.Table(dataframe=df), fields=fields, string_fields=string_fields
    )

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç»˜åˆ¶å’Œè®°å½•ç²¾ç¡®åº¦-å¬å›æ›²çº¿
def _plot_curve(x, y, names=None, id="precision-recall", title="Precision Recall Curve", x_title="Recall", y_title="Precision", num_x=100, only_mean=False):
    """
    è®°å½•æŒ‡æ ‡æ›²çº¿å¯è§†åŒ–ã€‚

    å‚æ•°:
        x (np.ndarray): xè½´çš„æ•°æ®ç‚¹ï¼Œé•¿åº¦ä¸ºNã€‚
        y (np.ndarray): yè½´çš„æ•°æ®ç‚¹ï¼Œå½¢çŠ¶ä¸ºCxNï¼ŒCä¸ºç±»åˆ«æ•°é‡ã€‚
        names (list, optional): ç±»åˆ«åç§°ï¼Œé•¿åº¦ä¸ºCã€‚
        id (str, optional): è®°å½•æ•°æ®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé»˜è®¤ä¸º'precision-recall'ã€‚
        title (str, optional): å¯è§†åŒ–å›¾è¡¨çš„æ ‡é¢˜ï¼Œé»˜è®¤ä¸º'Precision Recall Curve'ã€‚
        x_title (str, optional): xè½´çš„æ ‡ç­¾ï¼Œé»˜è®¤ä¸º'Recall'ã€‚
        y_title (str, optional): yè½´çš„æ ‡ç­¾ï¼Œé»˜è®¤ä¸º'Precision'ã€‚
        num_x (int, optional): å¯è§†åŒ–çš„æ’å€¼æ•°æ®ç‚¹æ•°é‡ï¼Œé»˜è®¤ä¸º100ã€‚
        only_mean (bool, optional): æ˜¯å¦ä»…ç»˜åˆ¶å‡å€¼æ›²çº¿çš„æ ‡å¿—ï¼Œé»˜è®¤ä¸ºTrueã€‚
    """
    # åˆ›å»ºæ–°çš„xè½´æ•°æ®
    if names is None:
        names = []
    x_new = np.linspace(x[0], x[-1], num_x).round(5)

    # åˆ›å»ºç”¨äºè®°å½•çš„æ•°ç»„
    x_log = x_new.tolist()
    y_log = np.interp(x_new, x, np.mean(y, axis=0)).round(3).tolist()

    if only_mean:
        # ä»…è®°å½•å‡å€¼æ›²çº¿
        table = wb.Table(data=list(zip(x_log, y_log)), columns=[x_title, y_title])
        wb.run.log({title: wb.plot.line(table, x_title, y_title, title=title)})
    else:
        # è®°å½•æ¯ä¸ªç±»åˆ«çš„æ›²çº¿
        classes = ["mean"] * len(x_log)
        for i, yi in enumerate(y):
            x_log.extend(x_new)  # æ·»åŠ æ–°çš„xæ•°æ®
            y_log.extend(np.interp(x_new, x, yi))  # å¯¹yè¿›è¡Œæ’å€¼
            classes.extend([names[i]] * len(x_new))  # æ·»åŠ ç±»åˆ«åç§°
        wb.log({id: _custom_table(x_log, y_log, classes, title, x_title, y_title)}, commit=False)

# å®šä¹‰è®­ç»ƒç»“æŸæ—¶çš„å›è°ƒå‡½æ•°
def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶ä¿å­˜æœ€ä½³æ¨¡å‹å¹¶è®°å½•æ›²çº¿å›¾ã€‚"""
    # è®°å½•éªŒè¯å™¨å’Œè®­ç»ƒå™¨çš„å›¾è¡¨
    _log_plots(trainer.validator.plots, step=trainer.epoch + 1)
    _log_plots(trainer.plots, step=trainer.epoch + 1)
    
    # åˆ›å»ºä¸€ä¸ªWandBçš„Artifactï¼Œç”¨äºä¿å­˜æœ€ä½³æ¨¡å‹
    art = wb.Artifact(type="model", name=f"run_{wb.run.id}_model")
    if trainer.best.exists():
        art.add_file(trainer.best)  # æ·»åŠ æœ€ä½³æ¨¡å‹æ–‡ä»¶
        wb.run.log_artifact(art, aliases=["best"])  # è®°å½•Artifact
    
    # è®°å½•æ¯ä¸ªæ›²çº¿çš„å¯è§†åŒ–
    for curve_name, curve_values in zip(trainer.validator.metrics.curves, trainer.validator.metrics.curves_results):
        x, y, x_title, y_title = curve_values
        _plot_curve(
            x,
            y,
            names=list(trainer.validator.metrics.names.values()),
            id=f"curves/{curve_name}",
            title=curve_name,
            x_title=x_title,
            y_title=y_title,
        )
    wb.run.finish()  # ç»“æŸWandBçš„è¿è¡Œ
```

### ä»£ç è¯´æ˜ï¼š
1. **å¯¼å…¥åº“**ï¼šå¯¼å…¥äº†`numpy`ã€`pandas`å’Œ`wandb`åº“ï¼Œåè€…ç”¨äºè®°å½•å’Œå¯è§†åŒ–å®éªŒæ•°æ®ã€‚
2. **è‡ªå®šä¹‰è¡¨æ ¼å‡½æ•°**ï¼š`_custom_table`å‡½æ•°ç”¨äºåˆ›å»ºç²¾ç¡®åº¦-å¬å›æ›²çº¿çš„å¯è§†åŒ–ï¼Œå¹¶å°†å…¶è®°å½•åˆ°WandBä¸­ã€‚
3. **ç»˜åˆ¶æ›²çº¿å‡½æ•°**ï¼š`_plot_curve`å‡½æ•°æ ¹æ®è¾“å…¥æ•°æ®ç”Ÿæˆç²¾ç¡®åº¦-å¬å›æ›²çº¿ï¼Œå¹¶é€‰æ‹©æ˜¯å¦ä»…è®°å½•å‡å€¼æ›²çº¿æˆ–æ‰€æœ‰ç±»åˆ«çš„æ›²çº¿ã€‚
4. **è®­ç»ƒç»“æŸå›è°ƒ**ï¼š`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶ä¿å­˜æœ€ä½³æ¨¡å‹ï¼Œå¹¶è®°å½•éªŒè¯æ›²çº¿çš„å¯è§†åŒ–ç»“æœã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºä¸WandBï¼ˆWeights and Biasesï¼‰é›†æˆçš„å›è°ƒæ¨¡å—ï¼Œä¸»è¦ç”¨äºè®°å½•å’Œå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡å’Œæ›²çº¿ï¼Œç‰¹åˆ«æ˜¯ä¸YOLOï¼ˆYou Only Look Onceï¼‰æ¨¡å‹ç›¸å…³çš„è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ã€‚æ–‡ä»¶ä¸­é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬Ultralyticsçš„å·¥å…·å‡½æ•°ä»¥åŠWandBåº“ã€‚ç¨‹åºå¼€å§‹æ—¶ä¼šè¿›è¡Œä¸€äº›åŸºæœ¬çš„æ£€æŸ¥ï¼Œç¡®ä¿åœ¨éæµ‹è¯•ç¯å¢ƒä¸‹è¿è¡Œï¼Œå¹¶ä¸”WandBé›†æˆå·²å¯ç”¨ã€‚å¦‚æœå¯¼å…¥WandBå¤±è´¥æˆ–æœªå¯ç”¨ï¼Œåˆ™å°†`wb`è®¾ç½®ä¸º`None`ã€‚

æ–‡ä»¶ä¸­å®šä¹‰äº†å‡ ä¸ªä¸»è¦çš„å‡½æ•°ã€‚`_custom_table`å‡½æ•°ç”¨äºåˆ›å»ºå¹¶è®°å½•ä¸€ä¸ªè‡ªå®šä¹‰çš„ç²¾ç¡®åº¦-å¬å›æ›²çº¿å¯è§†åŒ–ï¼Œå®ƒæ¥å—xè½´å’Œyè½´çš„æ•°æ®ã€ç±»åˆ«æ ‡ç­¾ä»¥åŠå›¾è¡¨çš„æ ‡é¢˜ç­‰å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€‚åˆWandBè®°å½•çš„å¯¹è±¡ã€‚`_plot_curve`å‡½æ•°åˆ™ç”¨äºç”Ÿæˆå¹¶è®°å½•ä¸€ä¸ªæŒ‡æ ‡æ›²çº¿çš„å¯è§†åŒ–ï¼Œæ”¯æŒå¯¹ä¸åŒç±»åˆ«çš„æ•°æ®è¿›è¡Œèšåˆæˆ–å•ç‹¬ç»˜åˆ¶ã€‚è¯¥å‡½æ•°ä¼šç”Ÿæˆæ–°çš„xå€¼ï¼Œå¹¶æ ¹æ®è¾“å…¥æ•°æ®è¿›è¡Œæ’å€¼ï¼Œæœ€åè°ƒç”¨`_custom_table`æ¥è®°å½•ç»“æœã€‚

`_log_plots`å‡½æ•°ç”¨äºè®°å½•è¾“å…¥å­—å…¸ä¸­çš„å›¾è¡¨ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ­¥éª¤ä¸­å°šæœªè®°å½•è¿‡ï¼Œåˆ™å°†å…¶è®°å½•åˆ°WandBä¸­ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªå‡½æ•°åˆ†åˆ«å¯¹åº”äºè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸åŒé˜¶æ®µï¼Œä¾‹å¦‚`on_pretrain_routine_start`åœ¨é¢„è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ–WandBé¡¹ç›®ï¼Œ`on_fit_epoch_end`åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ï¼Œ`on_train_epoch_end`åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•æŸå¤±å’Œå­¦ä¹ ç‡ï¼Œå¹¶åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è®°å½•å›¾è¡¨ï¼Œ`on_train_end`åœ¨è®­ç»ƒç»“æŸæ—¶ä¿å­˜æœ€ä½³æ¨¡å‹å¹¶è®°å½•éªŒè¯æŒ‡æ ‡æ›²çº¿ã€‚

æœ€åï¼Œç¨‹åºå°†è¿™äº›å›è°ƒå‡½æ•°ç»„ç»‡æˆä¸€ä¸ªå­—å…¸ï¼Œåªæœ‰åœ¨WandBå¯ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨è¿™äº›å›è°ƒã€‚è¿™äº›å›è°ƒå‡½æ•°å¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«è°ƒç”¨ï¼Œä»¥ä¾¿å®æ—¶è®°å½•å’Œå¯è§†åŒ–æ¨¡å‹çš„è®­ç»ƒçŠ¶æ€å’Œæ€§èƒ½ã€‚æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å¢å¼ºYOLOæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç›‘æ§å’Œå¯è§†åŒ–èƒ½åŠ›ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œä¼˜åŒ–æ¨¡å‹æ€§èƒ½ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®ä¸»è¦å›´ç»•YOLOv8ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€éªŒè¯å’Œæ¨ç†è¿‡ç¨‹ï¼Œæä¾›äº†ä¸€ç³»åˆ—å·¥å…·å’Œæ¨¡å—ä»¥æ”¯æŒæ¨¡å‹çš„æ„å»ºã€è®­ç»ƒã€è¯„ä¼°å’Œå¯è§†åŒ–ã€‚æ•´ä½“æ¶æ„åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š

1. **æ¨¡å‹å®šä¹‰ä¸æ„å»º**ï¼šåŒ…æ‹¬ä¸åŒçš„ç¥ç»ç½‘ç»œç»“æ„ï¼ˆå¦‚RepVITã€YOLOå¤´ç­‰ï¼‰ï¼Œç”¨äºæ„å»ºYOLOv8æ¨¡å‹çš„ä¸åŒå˜ä½“ã€‚
2. **è®­ç»ƒä¸éªŒè¯**ï¼šæä¾›è®­ç»ƒè¿‡ç¨‹çš„ç®¡ç†ï¼ŒåŒ…æ‹¬æ•°æ®é›†çš„åŠ è½½ã€è®­ç»ƒå¾ªç¯çš„æ§åˆ¶ã€æŸå¤±è®¡ç®—å’ŒæŒ‡æ ‡è®°å½•ã€‚
3. **æ¨ç†ä¸è·Ÿè¸ª**ï¼šå®ç°ç›®æ ‡æ£€æµ‹åçš„å¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ï¼Œç¡®ä¿åœ¨å®æ—¶åº”ç”¨ä¸­èƒ½å¤Ÿæœ‰æ•ˆåœ°è·Ÿè¸ªæ£€æµ‹åˆ°çš„å¯¹è±¡ã€‚
4. **å¯è§†åŒ–ä¸ç›‘æ§**ï¼šé›†æˆWandBç­‰å·¥å…·ä»¥è®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡ï¼Œå¸®åŠ©å¼€å‘è€…å®æ—¶ç›‘æ§æ¨¡å‹æ€§èƒ½ã€‚
5. **ç”¨æˆ·ç•Œé¢**ï¼šæä¾›ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ä»¥ä¾¿äºå¯åŠ¨å’Œè¿è¡Œæ¨¡å‹ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                 | åŠŸèƒ½æè¿°                                                         |
|------------------------------------------------------------------------|----------------------------------------------------------------|
| `D:\tools\20240809\code\ui.py`                                         | å¯åŠ¨Streamlit Webåº”ç”¨ï¼Œæä¾›ç”¨æˆ·ç•Œé¢ä»¥è¿è¡ŒYOLOv8æ¨¡å‹ã€‚            |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\rtdetr\val.py` | å®ç°YOLOv8æ¨¡å‹çš„éªŒè¯è¿‡ç¨‹ï¼ŒåŒ…å«æ•°æ®é›†æ„å»ºå’Œè¯„ä¼°æŒ‡æ ‡æ›´æ–°ã€‚          |
| `D:\tools\20240809\code\code\ultralytics\trackers\track.py`          | é›†æˆå¯¹è±¡è·Ÿè¸ªåŠŸèƒ½ï¼Œç®¡ç†ç›®æ ‡æ£€æµ‹åçš„è·Ÿè¸ªå™¨çš„åˆå§‹åŒ–å’Œæ›´æ–°ã€‚          |
| `D:\tools\20240809\code\train.py`                                      | å¤„ç†YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€æ¨¡å‹æ„å»ºå’Œè®­ç»ƒå¾ªç¯ã€‚      |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\repvit.py` | å®šä¹‰RepVITç¥ç»ç½‘ç»œç»“æ„ï¼Œæä¾›æ¨¡å‹æ„å»ºå’Œå‰å‘ä¼ æ’­åŠŸèƒ½ã€‚              |
| `D:\tools\20240809\code\code\ultralytics\utils\callbacks\wb.py`      | ä¸WandBé›†æˆï¼Œè®°å½•å’Œå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ›²çº¿ã€‚                |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\trackers\bot_sort.py` | å®ç°BotSortè·Ÿè¸ªç®—æ³•ï¼Œæ”¯æŒç›®æ ‡æ£€æµ‹åçš„å¯¹è±¡è·Ÿè¸ªã€‚                   |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\modules\head.py` | å®šä¹‰YOLOæ¨¡å‹çš„å¤´éƒ¨ç»“æ„ï¼Œå¤„ç†è¾“å‡ºå±‚çš„æ„å»ºå’Œå‰å‘ä¼ æ’­ã€‚              |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\__init__.py` | åˆå§‹åŒ–YOLOæ¨¡å‹ï¼Œæä¾›æ¨¡å‹æ„å»ºå’ŒåŠ è½½åŠŸèƒ½ã€‚                          |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\fastsam\__init__.py` | å®šä¹‰FastSAMæ¨¡å‹ï¼Œæä¾›å¿«é€Ÿåˆ†å‰²å’Œæ£€æµ‹åŠŸèƒ½ã€‚                          |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\CSwomTramsformer.py` | å®ç°CSwomTransformerç»“æ„ï¼Œæ”¯æŒç‰¹å¾æå–å’Œå¢å¼ºã€‚                    |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\extra_modules\head.py` | å®šä¹‰é¢å¤–çš„è¾“å‡ºå¤´éƒ¨ç»“æ„ï¼Œæ”¯æŒå¤šç§è¾“å‡ºå½¢å¼ã€‚                        |
| `D:\tools\20240809\code\70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\modules\conv.py` | å®šä¹‰å·ç§¯å±‚åŠå…¶å˜ä½“ï¼Œæä¾›æ¨¡å‹çš„åŸºç¡€æ„å»ºå—ã€‚                        |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†é¡¹ç›®ä¸­å„ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªYOLOv8æ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†æµç¨‹ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuXlptp](https://mbd.pub/o/bread/ZpuXlptp)